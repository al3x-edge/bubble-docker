<VirtualHost *:80>
  DocumentRoot "/var/www/babblesphere/babbles.co/"
  DirectoryIndex index.cfm home.cfm

  <Directory "/var/www/babblesphere/babbles.co">
        Options +Indexes +FollowSymLinks +Includes +ExecCGI
        AllowOverride All
        Require all granted

        Satisfy Any
        Order allow,deny
        allow from all
  </Directory>

  <IfModule mod_rewrite.c>
    RewriteEngine On

    # Be sure to turn off in production so not to over burden log
    # LogLevel alert rewrite:trace3

    # dont force .cfm removal from railo context
    RewriteCond %{REQUEST_URI} !^/railo-context
    # dont force .cfm removal from flash audio context
    RewriteCond %{REQUEST_URI} !^/session/rxds/flash
    RewriteCond %{REQUEST_URI} !^/devjlp/NEW_EBM/session/rxds/flash

    # exclude taffy web services from this rule
    RewriteCond %{REQUEST_URI} !^/ebmresponse
    RewriteCond %{REQUEST_URI} !^/webservice
    RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.cfm [NC]
    RewriteRule ^ %1 [R=301,L,NC]

    # dont do this here but in .htaccess files in directories that need it
    # internally rewrite extensionless request to .cfm  need it
    #RewriteCond %{REQUEST_FILENAME}\.cfm -f
    #RewriteRule ^/?(.*)$ $1.cfm [PT,L]
  </IfModule>

  ServerName babbles.com
</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
